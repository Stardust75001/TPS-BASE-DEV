# üöÄ CHECKLIST DEBUG SHOPIFY - TPS BASE DEV

**Version:** 1.0 | **Date:** 3 octobre 2025
**Expert:** GitHub Copilot Shopify Specialist
**Usage:** √Ä coller dans vos PR & avant chaque d√©ploiement

---

## üõ†Ô∏è **STACK DEV SHOPIFY - CONFIGURATION COMPL√àTE**

### ‚úÖ **VS Code Extensions Install√©es**

```vscode-extensions
shopify.theme-check-vscode,sissel.shopify-liquid,killalau.vscode-liquid-snippets,kirchner-trevor.shopify-liquid-preview,neilding.language-liquid
```

### üîß **CLI & Outils Requis**

| **Outil** | **Status** | **Usage** | **Installation** |
|-----------|------------|-----------|------------------|
| **Theme Check** | ‚úÖ Install√© | Linter Liquid/JSON | `gem install theme-check` |
| **Shopify CLI** | ‚ùì √Ä v√©rifier | Dev server, push/pull | `npm install -g @shopify/cli` |
| **Lighthouse** | üîß Browser | Performance audit | Extension Chrome |
| **Theme Inspector** | üîß Browser | Profile Liquid | Extension Chrome |

### üìã **Commandes de Base Shopify**

```bash
# D√©veloppement local
shopify theme dev         # serveur dev + hot reload
shopify theme check       # linter le th√®me complet
shopify theme push        # d√©ployer sur store

# Maintenance
theme-check              # alternative locale (Ruby gem)
lighthouse --view        # audit performance
```

---

## ‚úÖ **CHECKLIST DEBUGGING 10 POINTS CRITIQUE**

### **1. üîÑ LIQUID - Performance & Logique**

- [ ] **Boucles optimis√©es** - Aucun `for` imbriqu√© ou `render` dans boucle
- [ ] **Variables efficaces** - `assign` plut√¥t que `capture` quand possible
- [ ] **Conditions propres** - `unless` √©vit√©, logique claire
- [ ] **Filters modernes** - `image_url` au lieu de `img_url` d√©pr√©ci√©

**Test:**
```bash
grep -r "img_url\|for.*for\|render.*for" --include="*.liquid" .
```

### **2. üåç TRADUCTIONS - Internationalisation**

- [ ] **Toutes cl√©s traduites** - {{ 'key' | t }} pour tous textes visibles
- [ ] **Fichiers JSON complets** - en.default.json, fr.json, de.json coh√©rents
- [ ] **Pas de texte hardcod√©** - Aucun texte fran√ßais/anglais en dur dans Liquid
- [ ] **Cl√©s organis√©es** - Structure logique par section/fonctionnalit√©

**Test:**
```bash
# Validation JSON
for file in locales/*.json; do
  python3 -m json.tool "$file" > /dev/null || echo "‚ùå Erreur: $file"
done

# Texte hardcod√©
grep -r '"[A-Za-z ]{3,}"' --include="*.liquid" sections/ snippets/
```

### **3. üìã JSON SCHEMA - Configuration Sections**

- [ ] **JSON valide** - Aucune erreur syntaxe, pas de virgules finales
- [ ] **IDs uniques** - Tous les `"id"` diff√©rents dans settings
- [ ] **Presets coh√©rents** - `max_blocks` respect√© dans presets
- [ ] **Types corrects** - `url`, `image_picker`, `text` bien typ√©s

**Test:**
```bash
# V√©rifier schema sections
find sections/ -name "*.liquid" -exec grep -l "{% schema %}" {} \; | \
xargs -I {} sh -c 'echo "=== {} ===" && sed -n "/{% schema %}/,/{% endschema %}/p" {} | sed "1d;\$d" | jq .'
```

### **4. üé® CSS - Style & Responsive**

- [ ] **Pas de !important global** - Utilis√© uniquement pour overrides critiques
- [ ] **Classes namesp√©es** - Pr√©fixe `.tps-` pour √©viter conflits
- [ ] **Responsive complet** - Mobile-first, breakpoints coh√©rents
- [ ] **CSS optimis√©** - Pas de r√®gles inutiles ou dupliqu√©es

**Test:**
```bash
# D√©tection !important excessif
grep -r "!important" --include="*.css" --include="*.scss" assets/ | wc -l

# V√©rification responsive
grep -r "@media\|mobile\|tablet\|desktop" --include="*.css" assets/
```

### **5. ‚ö° JAVASCRIPT - Fonctionnalit√© & Performance**

- [ ] **Console propre** - Aucune erreur JS dans DevTools
- [ ] **Imports corrects** - ES6 modules ou scripts charg√©s proprement
- [ ] **Scripts essentiels** - Suppression code mort, analytics optimis√©
- [ ] **Events optimis√©s** - Debouncing sur scroll/resize, listeners nettoy√©s

**Test:**
```bash
# D√©tection console.log oubli√©s
grep -r "console\." --include="*.js" --include="*.liquid" .

# Scripts analys√©s
find assets/ -name "*.js" -exec echo "=== {} ===" \; -exec head -10 {} \;
```

### **6. ‚ôø ACCESSIBILIT√â - A11y Compliance**

- [ ] **Alt complets** - Tous `<img>` ont `alt` descriptif ou `alt=""`
- [ ] **Structure H1-H6** - Hi√©rarchie logique, 1 seul H1 par page
- [ ] **Focus visible** - Tabulation navigable, outline sur √©l√©ments interactifs
- [ ] **Contraste suffisant** - WCAG AA respect√© (4.5:1 minimum)

**Test:**
```bash
# Images sans alt
grep -r "<img" --include="*.liquid" . | grep -v "alt="

# Structure headings
grep -rE "<h[1-6]" --include="*.liquid" sections/ | head -10

# Focus states
grep -r "focus\|outline" --include="*.css" assets/
```

### **7. üñºÔ∏è IMAGES - Performance & Formats**

- [ ] **Dimensions explicites** - `width` et `height` sur toutes images
- [ ] **Loading intelligent** - `loading="lazy"` partout sauf LCP (`fetchpriority="high"`)
- [ ] **Formats optimaux** - WebP avec fallback JPEG, tailles adapt√©es
- [ ] **Responsive images** - `srcset` pour diff√©rentes r√©solutions

**Test:**
```bash
# Images sans dimensions
grep -r "<img" --include="*.liquid" . | grep -v 'width=\|height='

# Loading attributes
grep -r "loading=" --include="*.liquid" . | head -5

# Formats images
find assets/ -name "*.webp" -o -name "*.jpg" -o -name "*.png" | wc -l
```

### **8. üìà PERFORMANCE - Core Web Vitals**

- [ ] **Lighthouse Score >90** - Mobile ET Desktop
- [ ] **LCP <2.5s** - Image hero optimis√©e, CSS critique inline
- [ ] **CLS <0.1** - Dimensions r√©serv√©es, pas de layout shift
- [ ] **FID <100ms** - JavaScript non-bloquant, interactions rapides

**Test:**
```bash
# Audit Lighthouse (n√©cessite Chrome + lighthouse CLI)
lighthouse https://votre-store.myshopify.com --only-categories=performance

# M√©triques critiques
echo "üîç V√©rifiez manuellement:"
echo "- Page Speed Insights: https://pagespeed.web.dev/"
echo "- Chrome DevTools > Performance tab"
```

### **9. üîç SEO - R√©f√©rencement & Structure**

- [ ] **Title dynamique** - `<title>` unique par page, 50-60 caract√®res
- [ ] **Meta descriptions** - Uniques, 150-160 caract√®res, avec mots-cl√©s
- [ ] **URLs canoniques** - `rel="canonical"` correct sur toutes pages
- [ ] **Structure donn√©es** - Schema.org pour produits/avis si applicable

**Test:**
```bash
# Title tags
grep -r "<title>" --include="*.liquid" layout/ templates/

# Meta descriptions
grep -r 'name="description"' --include="*.liquid" .

# Canonical URLs
grep -r 'rel="canonical"' --include="*.liquid" .
```

### **10. üöÄ D√âPLOIEMENT - Production Ready**

- [ ] **Theme Check clean** - `theme-check` sans erreurs critiques
- [ ] **Git commits propres** - Messages clairs, pas de fichiers temp
- [ ] **Test pr√©-prod** - Validation sur th√®me staging avant publication
- [ ] **Backup theme** - Sauvegarde avant push vers production

**Test:**
```bash
# Theme check final
~/.rbenv/shims/theme-check --list

# Status Git
git status --porcelain

# Fichiers sensibles non track√©s
echo "V√©rifiez .gitignore pour:"
echo "- *.log, *.tmp"
echo "- .env, config.yml"
echo "- node_modules/, .DS_Store"
```

---

## üß™ **TESTS AUTOMATIS√âS RECOMMAND√âS**

### **A. Accessibilit√© & Responsive**

```bash
# Installation axe-core CLI
npm install -g @axe-core/cli

# Audit accessibilit√©
axe https://votre-store.myshopify.com --tags=wcag2a,wcag2aa

# Test responsive (diff√©rentes tailles)
# Mobile: 375x667 (iPhone SE)
# Tablet: 768x1024 (iPad)
# Desktop: 1920x1080 (Full HD)
```

### **B. Performance & M√©triques**

```bash
# Lighthouse CI (int√©gration continue)
npm install -g @lhci/cli
lhci autorun --upload.target=temporary-public-storage

# Core Web Vitals monitoring
# Utilisez: Google Search Console > Exp√©rience > Core Web Vitals
```

### **C. S√©curit√© & Variables Sensibles**

```bash
# Scan secrets (git-secrets ou truffleHog)
npm install -g detect-secrets
detect-secrets scan --all-files .

# Variables d'environnement
grep -r "sk_\|pk_\|secret\|password\|token" --include="*.liquid" --include="*.js" .
```

---

## ‚ö° **COMMANDES RAPIDES - DAILY WORKFLOW**

### **Pr√©-commit Hook (recommand√©)**

```bash
# .git/hooks/pre-commit
#!/bin/sh
echo "üîç Theme Check..."
~/.rbenv/shims/theme-check --list || exit 1

echo "üìù JSON Validation..."
for file in locales/*.json; do
  python3 -m json.tool "$file" > /dev/null || exit 1
done

echo "üñºÔ∏è Images Check..."
missing_alt=$(grep -r "<img" --include="*.liquid" . | grep -v "alt=" | wc -l)
if [ "$missing_alt" -gt 0 ]; then
  echo "‚ùå $missing_alt images sans attribut alt"
  exit 1
fi

echo "‚úÖ Pre-commit checks passed!"
```

### **Debug Rapide (5min)**

```bash
# Script de validation rapide
#!/bin/bash
echo "üöÄ QUICK DEBUG TPS BASE DEV"

# 1. Theme check
echo "1. Theme Check..."
~/.rbenv/shims/theme-check --list | head -20

# 2. JSON validation
echo "2. JSON Locales..."
for file in locales/*.json; do
  python3 -m json.tool "$file" > /dev/null && echo "‚úÖ $(basename $file)" || echo "‚ùå $(basename $file)"
done

# 3. Images dimensions
echo "3. Images sans dimensions:"
grep -r "<img" --include="*.liquid" . | grep -v 'width=\|height=' | wc -l

# 4. S√©curit√©
echo "4. Scan secrets:"
grep -r "sk_\|pk_\|secret.*=" --include="*.liquid" --include="*.js" . | wc -l

# 5. Performance hints
echo "5. Loading attributes:"
grep -r "loading=" --include="*.liquid" . | wc -l

echo "‚úÖ Quick debug completed!"
```

---

## üìä **MONITORING EN PRODUCTION**

### **M√©triques √† Surveiller**

1. **Core Web Vitals** (Google Search Console)
2. **Lighthouse CI** (GitHub Actions)
3. **Uptime monitoring** (Pingdom, UptimeRobot)
4. **Error tracking** (Sentry pour JS)
5. **Performance** (SpeedCurve, GTmetrix)

### **Alertes Recommand√©es**

- üìâ Lighthouse Score < 85
- ‚ö†Ô∏è CLS > 0.15 (Layout shift)
- üêå LCP > 3s (Loading performance)
- ‚ùå Erreurs JS > 5/jour
- üì± Mobile usability errors (Search Console)

---

**üí° TIPS PRO:**

- üîÑ Lancez cette checklist √† chaque PR
- üéØ Focalisez sur les erreurs critiques avant les suggestions
- üì± Testez toujours mobile-first
- ‚ö° Optimisez d'abord le LCP (Largest Contentful Paint)
- üîí Ne committez JAMAIS de tokens/secrets

**üöÄ Avec cette checklist, votre th√®me Shopify sera production-ready √† 100% !**
